{% extends 'master_layout.html' %} {% block title %}Bookster{% endblock %} {%
block content %}

<div>{% include 'partials/navbar.html' %}</div>

<div
	style="
		max-width: 100%;
		justify-content: center;
		align-items: center;
		margin-left: 425px;
		margin-top: 70px;
		display: inline-flex;
		position: relative;
	"
>
	<img
		style="
			width: 410.667px;
			height: 400px;
			box-shadow: 20px 20px 25px -13px rgba(61, 60, 60, 0.36);
			border-radius: 15px;
			margin-left: -10px;
		"
		src="{{ user_profile_data['image_url'] or 'https://res.cloudinary.com/dclxaugvd/image/upload/v1702023561/bookster/deafult_knp2po.png' }}"
		alt="{{ user_id }}"
	/>

	<!-- About me text -->
	<div
		style="
			width: 100%;
			color: #3d3c3c;
			font-size: 36px;
			font-family: 'Unica One';
			font-weight: 400;
			word-wrap: break-word;
			margin-left: 1000px;
			margin-top: -350px;
			z-index: 1;
			position: absolute;
		"
	>
		About me
	</div>

	<!-- Icon -->
	<div
		style="
			position: absolute;
			margin-left: 930px;
			margin-top: -345px;
			z-index: 2;
		"
	>
		<a href="{{ url_for('userprofile.edit_user_profile') }}">
			<img
				style="width: 27.75px; height: 28px"
				src="{{ url_for('static', filename='img/userprofile/edit.png') }}"
				alt="icon"
			/>
		</a>
	</div>

	<div
		style="
			width: 595.07px;
			height: 359px;
			position: absolute;
			left: 0;
			top: 30px;
			z-index: 0;
		"
	>
		<div
			style="
				width: 581.65px;
				height: 343.16px;
				left: 500.42px;
				top: 40.84px;
				position: absolute;
				background: #676767;
				border-radius: 20px;
			"
		></div>
		<div
			style="
				width: 581.65px;
				height: 343.16px;
				left: 485px;
				top: 25px;
				position: absolute;
				background: white;
				border-radius: 20px;
				border: 2px #3d3c3c dotted;
			"
		></div>
	</div>
	<div
		style="
			width: 497.78px;
			height: 342.3px;
			position: absolute;
			left: 520.25px;
			top: 70px;
			color: #676767;
			font-size: 14px;
			font-family: 'Syne';
			font-weight: 400;
			word-wrap: break-word;
		"
	>
		<br />
		<br /><br /><br /><br />
		{% if user_profile_data and user_profile_data.bio %} {{
		user_profile_data.bio }} {% else %}
		<p style="text-align: center; margin-top: 30px; opacity: 0.7">
			--No Bio yet--
		</p>
		{% endif %}
	</div>
</div>

<div
	style="
		max-width: 100%;
		position: relative;
		display: flex;
		align-items: center;
		justify-content: center;
	"
>
	<!-- Text box element -->
	<div style="max-width: 100%; position: relative">
		<div
			style="
				width: 414.44px;
				height: 63.09px;
				position: absolute;
				left: -545px;
				top: 6.91px;
				background: #676767;
				border-radius: 20px;
			"
		></div>
		<div
			style="
				width: 414.44px;
				height: 63.09px;
				position: absolute;
				left: -550px;
				top: 0px;
				background: white;
				border-radius: 20px;
				border: 2px #3d3c3c dotted;
			"
		></div>
		<div
			style="
				width: 338.56px;
				left: -520px;
				top: 23px;
				position: absolute;
				color: #676767;
				font-size: 16px;
				font-family: 'Syne', sans-serif;
				font-weight: 500;
				word-wrap: break-word;
			"
		>
			{% if user_profile_data and user_profile_data.name %} {{
			user_profile_data.name }} {% else %} {{ username }}
			<!-- Display username if no user profile data or name is None/empty -->
			{% endif %}
		</div>
	</div>

	<!-- Instagram icon -->
	<a
		href="{{ user_profile_data.instagram }}"
		style="z-index: 2"
	>
		<img
			style="
				width: 48px;
				height: 48px;
				position: absolute;
				left: 950px;
				top: 25px;
			"
			src="{{ url_for('static', filename='img/userprofile/ig.png') }}"
			alt="instagram"
		/>
	</a>
	<!-- Twitter icon -->
	<a
		href="{{ user_profile_data.twitter }}"
		style="z-index: 2"
	>
		<img
			style="
				width: 48px;
				height: 48px;
				position: absolute;
				left: 1030px;
				top: 25px;
			"
			src="{{ url_for('static', filename='img/userprofile/twt.png') }}"
			alt="twitter"
		/>
	</a>
	<!-- Facebook icon -->
	<a
		href="{{ user_profile_data.facebook }}"
		style="z-index: 2"
	>
		<img
			style="
				width: 48px;
				height: 48px;
				position: absolute;
				left: 1120px;
				top: 25px;
			"
			src="{{ url_for('static', filename='img/userprofile/fb.png') }}"
			alt="facebook"
		/>
	</a>
	<!-- My Library button -->
	<a
		href="{{ url_for('home.user_books', user_id=user_profile_data.user_id) }}"
		style="z-index: 2"
	>
		<img
			style="
				width: 283px;
				height: 46px;
				position: absolute;
				left: 1210px;
				top: 25px;
			"
			src="{{ url_for('static', filename='img/userprofile/mylibrary.png') }}"
			alt="My Library"
		/>
	</a>
</div>
<br /><br /><br /><br /><br /><br />

<div
	style="
		max-width: 100%;
		position: relative;
		display: flex;
		flex-direction: column;
		align-items: center;
		background-color: #f0e7da;
		box-shadow: 0px 5px 10px rgba(0, 0, 0, 0.3);
	"
>
	<!-- Text "my purchase history" -->
	<div
		style="
			width: 640px;
			left: 95px;
			top: 50px;
			position: absolute;
			color: #3d3c3c;
			font-size: 36px;
			font-family: Unica One;
			font-weight: 400;
			word-wrap: break-word;
		"
	>
		my purchase history
	</div>
	<img
		style="
			width: 26px;
			height: 21.12px;
			left: 65px;
			top: 70px;
			position: absolute;
		"
		src="{{ url_for('static', filename='img/userprofile/Path.png') }}"
		alt="Icon"
	/>
	<br /><br />
	{% if purchased_books or rented_books %}
	<div class="order-container">
		<div class="tabs">
			<input
				type="radio"
				class="tabs-radio"
				name="tabs-example"
				id="tab1"
				checked
			/>
			<label
				for="tab1"
				class="tab-label"
				>Purchased Books</label
			>
			<div class="tabs__content">
				{% if purchased_books %} {% for i in range(purchased_books|length) %} {%
				set book = purchase_detail[i] %} {% set seller = seller[i] %} {% set
				purchased_book = purchased_books[i] %}
				<div class="purchase-order-container">
					<div class="order-details">
						<div class="order-photo"></div>
						<div class="order-book-details">
							<a
								href="{{ url_for('home.book_user_detail', book_id=book['book_id'], user_id=purchased_book['seller_id']) }}"
								style="color: #222"
								><b
									class="order-text"
									style="font-size: 2.2rem"
									>{{ book.book_title }}</b
								></a
							>
							<div class="order-text">
								Purchased From:
								<a
									href="{{ url_for('userprofile.get_user_profile_route', user_id=purchased_book['seller_id']) }}"
									style="color: #222; background-color: transparent"
								>
									<b class="order-text">{{ seller[0][1] }}</b></a
								>
							</div>
							<div class="order-text">
								Quantity:
								<b class="order-text">{{purchased_book.quantity}}</b>
							</div>
						</div>
					</div>
				</div>
				{% endfor %} {% endif %}
			</div>
			<input
				type="radio"
				class="tabs-radio"
				name="tabs-example"
				id="tab2"
			/>
			<label
				for="tab2"
				class="tab-label"
				>Rented Books</label
			>
			<div class="tabs__content">
				{% if rented_books %} {% for i in range(rented_books|length) %} {% set
				book = rent_detail[i] %} {% set owner = owner[i] %} {% set rented_book =
				rented_books[i] %}
				<div class="rent-order-container">
					<div class="order-details">
						<div class="order-photo"></div>
						<div class="order-book-details">
							<a
								href="{{ url_for('home.book_user_detail', book_id=book['book_id'], user_id=rented_book['owner_id']) }}"
								style="color: #222"
								><b
									class="order-text"
									style="font-size: 2.2rem"
									>{{ book.book_title }}</b
								></a
							>
							<div class="order-text">
								Rented From:
								<a
									href="{{ url_for('userprofile.get_user_profile_route', user_id=rented_book['owner_id']) }}"
									style="color: #222; background-color: transparent"
								>
									<b class="order-text">{{ owner[0][1] }}</b></a
								>
							</div>
							{% if rented_book.is_returned == 1 %}
							<div class="order-text">RETURNED</div>
							{% else %}
							<div class="order-text">
								To be returned by:
								<b class="order-text">{{rented_book.rent_end_date}}</b>
							</div>
							{% endif %}
						</div>
					</div>
				</div>
				{% endfor %} {% endif %}
			</div>
		</div>
	</div>
	{% else%}
	<!-- Image below the overlay -->
	<img
		style="width: 50%; max-width: 300px; height: auto"
		src="https://res.cloudinary.com/dclxaugvd/image/upload/v1702285343/bookster/order_ipjyer.png"
		alt="{{ user_id }}"
	/>

	<p
		style="
			text-align: center;
			font-size: 16px;
			color: #3d3c3c;
			font-family: 'Syne', sans-serif;
			font-weight: 550;
		"
	>
		No orders yet
	</p>
	{% endif %}

	<br /><br /><br />
</div>
{% endblock %}
